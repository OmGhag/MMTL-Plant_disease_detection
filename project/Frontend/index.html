<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Disease Classifier</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🌱 Plant Disease Classifier</h1>
            <p>Multi-modal AI system using image, soil, and weather data</p>
        </header>

        <div class="status" id="status">
            <div class="loader"></div>
            <span>Checking API connection...</span>
            <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                Make sure Flask backend is running at http://127.0.0.1:5000
            </div>
        </div>

        <main id="mainContent" style="display: none;">
            <!-- Image Input -->
            <section class="input-section">
                <h2>📸 Plant Image</h2>
                <div class="upload-area" id="uploadArea">
                    <input type="file" id="imageInput" accept="image/*" hidden>
                    <label for="imageInput" class="upload-label">
                        <span class="upload-icon">📁</span>
                        <span>Click to upload or drag image here</span>
                    </label>
                </div>
                <canvas id="imageCanvas" style="display: none;"></canvas>
            </section>

            <!-- Soil Input -->
            <section class="input-section">
                <h2>🌍 Soil Parameters</h2>
                <div class="input-grid">
                    <div class="input-group">
                        <label>pH</label>
                        <input type="number" id="soil_ph" step="0.1" value="6.5" min="0" max="14">
                    </div>
                    <div class="input-group">
                        <label>Nitrogen (N)</label>
                        <input type="number" id="soil_nitrogen" step="0.01" value="50" min="0">
                    </div>
                    <div class="input-group">
                        <label>Phosphorus (P)</label>
                        <input type="number" id="soil_phosphorus" step="0.01" value="40" min="0">
                    </div>
                    <div class="input-group">
                        <label>Potassium (K)</label>
                        <input type="number" id="soil_potassium" step="0.01" value="30" min="0">
                    </div>
                    <div class="input-group">
                        <label>Temperature (°C)</label>
                        <input type="number" id="soil_temperature" step="0.1" value="22">
                    </div>
                    <div class="input-group">
                        <label>Humidity (%)</label>
                        <input type="number" id="soil_humidity" step="0.1" value="65" min="0" max="100">
                    </div>
                </div>
            </section>

            <!-- Weather Input -->
            <section class="input-section">
                <h2>🌦️ Weather Data</h2>
                <div class="weather-tabs">
                    <button class="tab-btn active" data-tab="short">Short-term (48h)</button>
                    <button class="tab-btn" data-tab="full">Full (168h)</button>
                </div>
                
                <div class="weather-input" id="weatherShort">
                    <p class="info-text">Enter 48 hourly readings (comma-separated for each feature)</p>
                    <div class="input-group">
                        <label>Air Temperature (°C)</label>
                        <textarea id="air_temp_short" rows="2" placeholder="e.g., 20,21,22,23..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Relative Humidity (%)</label>
                        <textarea id="rel_humidity_short" rows="2" placeholder="e.g., 65,66,64,67..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Leaf Wetness (hours last 24)</label>
                        <textarea id="leaf_wetness_short" rows="2" placeholder="e.g., 0,1,2,0..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Precipitation (mm/hr)</label>
                        <textarea id="precip_short" rows="2" placeholder="e.g., 0,0,1.2,0..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Soil Moisture (m³/m³)</label>
                        <textarea id="soil_moisture_short" rows="2" placeholder="e.g., 0.25,0.26,0.24..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Dew Point (°C)</label>
                        <textarea id="dew_point_short" rows="2" placeholder="e.g., 15,16,14..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>VPD (kPa)</label>
                        <textarea id="vpd_short" rows="2" placeholder="e.g., 1.2,1.3,1.1..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Wind Speed (m/s)</label>
                        <textarea id="wind_speed_short" rows="2" placeholder="e.g., 2.5,3.0,2.8..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Solar Radiation (W/m²)</label>
                        <textarea id="solar_short" rows="2" placeholder="e.g., 800,850,900..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Soil Temperature (°C)</label>
                        <textarea id="soil_temp_short" rows="2" placeholder="e.g., 18,19,20..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Frost Flag (0 or 1)</label>
                        <textarea id="frost_flag_short" rows="2" placeholder="e.g., 0,0,0,1..."></textarea>
                    </div>
                </div>

                <div class="weather-input" id="weatherFull" style="display: none;">
                    <p class="info-text">Enter 168 hourly readings (comma-separated for each feature)</p>
                    <div class="input-group">
                        <label>Air Temperature (°C)</label>
                        <textarea id="air_temp_full" rows="2" placeholder="e.g., 20,21,22,23..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Relative Humidity (%)</label>
                        <textarea id="rel_humidity_full" rows="2" placeholder="e.g., 65,66,64,67..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Leaf Wetness (hours last 24)</label>
                        <textarea id="leaf_wetness_full" rows="2" placeholder="e.g., 0,1,2,0..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Precipitation (mm/hr)</label>
                        <textarea id="precip_full" rows="2" placeholder="e.g., 0,0,1.2,0..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Soil Moisture (m³/m³)</label>
                        <textarea id="soil_moisture_full" rows="2" placeholder="e.g., 0.25,0.26,0.24..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Dew Point (°C)</label>
                        <textarea id="dew_point_full" rows="2" placeholder="e.g., 15,16,14..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>VPD (kPa)</label>
                        <textarea id="vpd_full" rows="2" placeholder="e.g., 1.2,1.3,1.1..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Wind Speed (m/s)</label>
                        <textarea id="wind_speed_full" rows="2" placeholder="e.g., 2.5,3.0,2.8..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Solar Radiation (W/m²)</label>
                        <textarea id="solar_full" rows="2" placeholder="e.g., 800,850,900..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Soil Temperature (°C)</label>
                        <textarea id="soil_temp_full" rows="2" placeholder="e.g., 18,19,20..."></textarea>
                    </div>
                    <div class="input-group">
                        <label>Frost Flag (0 or 1)</label>
                        <textarea id="frost_flag_full" rows="2" placeholder="e.g., 0,0,0,1..."></textarea>
                    </div>
                </div>
                
                <button class="btn-generate" id="generateWeather">Generate Sample Data</button>
            </section>

            <!-- Predict Button -->
            <button class="btn-predict" id="predictBtn">🔍 Classify Disease</button>

            <!-- Results -->
            <section class="results" id="results" style="display: none;">
                <h2>📊 Prediction Results</h2>
                <div class="top-prediction">
                    <div class="disease-name" id="topDisease">Loading...</div>
                    <div class="confidence" id="topConfidence">0%</div>
                </div>
                <div class="all-predictions" id="allPredictions"></div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>